<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>

	<style>
		div{
			width: 150px;
			height: 150px;
			border-radius: 50%;
			border:1px solid black;
			text-align: center;
			line-height: 150px;
			font-size: 80px;
			margin:20px auto;
			color: #fff;
		}
		#red{
			background-color: #fff;
		}
		#green{
			background-color: #fff;
		}
		#yellow{
			background-color: #fff;
		}
	</style>
</head>
<body>
	<div id="red"></div>
	<div id="green"></div>
	<div id="yellow"></div>
</body>
</html>
<script>

	function t1(){
			$("#red").style.backgroundColor="red";
			$("#red").innerHTML=5
			let p=new Promise(function(resolve,reject){
			let	num =5
			mytime=setInterval(function(){
				num--
				if(num<=-1){
					clearInterval(mytime)
					$("#red").style.backgroundColor="#fff";
					$("#green").style.backgroundColor="green";
					num=5
					resolve()
				}
				$("#red").innerHTML=num	
				},1000)
			})
		return p
		}

	function t2(){
		$("#green").innerHTML=3;
		let p=new Promise(function(resolve,reject){
		let num2 = 3;
		let mytime2=setInterval(function(){
			num2--
			if(num2<=-1){
				clearInterval(mytime2);
				$("#green").style.backgroundColor="#fff"
				$("#yellow").style.backgroundColor="yellow";
				num2 = 3;
				resolve()
			}
			$("#green").innerHTML= num2;
			},1000)
	    })
	return p;
	}

	function t3(){
		$("#yellow").innerHTML =2;
		let p = new Promise(function(resolve,reject){
			let num3=2;
			let mytime3=setInterval(function(){
				num3--;
				if(num3 <= -1){
					clearInterval(mytime3);
					$("#yellow").style.backgroundColor="#fff";
						num3=2
						resolve()
					}
				$("#yellow").innerHTML=num3;

			},1000)
		})
	return p;
	}



window.onload=function(){
	kai()
	function kai(){
		t1().then(t2).then(t3).then(kai);
	}
	

}

function $(str){
	if(str.charAt(0)=="#"){
		return document.getElementById(str.substring(1));
	}else if(str.charAt(0)=="."){
		return document.getElementsByClsaaName(str.substring(1));
	}else{
		return document.getElementsByTagName(str)
	}
}
</script>